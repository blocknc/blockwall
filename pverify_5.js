document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[data-recaptcha-el="form-block"]').forEach((e=>{const t=e.querySelector("form"),a=e.querySelector('[data-recaptcha-el="success"]'),o=e.querySelector('[data-recaptcha-el="error"]'),l=t.querySelector('[type="submit"]'),c=t.querySelectorAll('input[type="url"]'),n=e.getAttribute("data-recaptcha-loadingtext")||"Loading...",r=l.value;if("hide"===e.getAttribute("data-recaptcha-badge")){const e=document.createElement("style");e.innerHTML=".grecaptcha-badge { visibility: hidden; }",document.head.appendChild(e)}t.addEventListener("submit",(function(i){i.preventDefault(),c.forEach((e=>{!function(e){let t=e.value.trim();console.log("Original URL Input:",t),!t.match(/^https?:\/\//i)&&t.length>0&&(e.value="https://"+t,console.log("Formatted URL:",e.value))}(e)}));for(let e of c)if(!e.checkValidity())return console.log("Invalid URL detected:",e.value),void e.reportValidity();!async function(){l.value=n;try{const c=await grecaptcha.execute("6Le_XUsqAAAAAKxtXMXAISRCGcFxUmoo5K22DRAG",{action:"submit"});let n={};new FormData(t).forEach(((e,t)=>{n[t]=e}));const i=await fetch("https://blockwall-recaptcha.netlify.app/.netlify/functions/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:c,formData:n})});l.value=r,i.ok?(a.style.display="block",o.style.display="none"):(a.style.display="none",o.style.display="block"),"true"===e.getAttribute("data-recaptcha-showconsole")&&console.log(await i.json())}catch(e){l.value=r,console.error("Error:",e),a.style.display="none",o.style.display="block"}}()}))}))}));
