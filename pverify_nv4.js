document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[data-recaptcha-el="form-block"]').forEach((e=>{const t=e.querySelector("form"),a=e.querySelector('[data-recaptcha-el="success"]'),r=e.querySelector('[data-recaptcha-el="error"]'),l=t.querySelector('[type="submit"]'),n=t.querySelectorAll('input[type="url"]'),o=e.getAttribute("data-recaptcha-loadingtext")||"Loading...",c=l.value;if("hide"===e.getAttribute("data-recaptcha-badge")){const e=document.createElement("style");e.innerHTML=".grecaptcha-badge { visibility: hidden; }",document.head.appendChild(e)}n.forEach((e=>{e.addEventListener("blur",(function(){let t=e.value.trim();const a=e.closest(".url-input-container");t.match(/^https?:\/\//i)?(a&&a.style.setProperty("--before-content","none"),e.classList.remove("has-placeholder"),e.style.paddingLeft="0.5rem"):t.length>0?(e.value="https://"+t,a&&a.style.setProperty("--before-content","none"),e.classList.remove("has-placeholder"),e.style.paddingLeft="0.5rem"):(a&&a.style.removeProperty("--before-content"),e.classList.add("has-placeholder"),e.style.paddingLeft="4.5rem")})),e.addEventListener("input",(function(){let t=e.value.trim();const a=e.closest(".url-input-container");""===t?(a&&a.style.removeProperty("--before-content"),e.classList.add("has-placeholder"),e.style.paddingLeft="5em"):e.classList.add("has-placeholder")}))})),t.addEventListener("submit",(function(e){e.preventDefault(),n.forEach((e=>{let t=e.value.trim();!t.match(/^https?:\/\//i)&&t.length>0&&(e.value="https://"+t)})),async function(){l.value=o;try{const e=await grecaptcha.execute("6Le_XUsqAAAAAKxtXMXAISRCGcFxUmoo5K22DRAG",{action:"submit"});let l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","g-recaptcha-response"),l.setAttribute("value",e),t.appendChild(l);const n=new FormData(t);(await fetch("https://blockwall-recaptcha.netlify.app/.netlify/functions/verify",{method:"POST",body:n})).ok?t.submit():(console.error("Netlify validation failed"),a.style.display="none",r.style.display="block")}catch(e){l.value=c,console.error("Error:",e),a.style.display="none",r.style.display="block"}}()}))}))}));
