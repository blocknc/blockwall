document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[data-recaptcha-el="form-block"]').forEach((t=>{const e=t.querySelector("form"),a=t.querySelector('[data-recaptcha-el="success"]'),l=t.querySelector('[data-recaptcha-el="error"]'),o=e.querySelector('[type="submit"]'),r=e.querySelectorAll('input[type="url"]'),c=t.getAttribute("data-recaptcha-loadingtext")||"Loading...",n=o.value;if("hide"===t.getAttribute("data-recaptcha-badge")){const t=document.createElement("style");t.innerHTML=".grecaptcha-badge { visibility: hidden; }",document.head.appendChild(t)}r.forEach((t=>{t.addEventListener("blur",(function(){let e=t.value.trim();!e.match(/^https?:\/\//i)&&e.length>0&&(t.setAttribute("data-full-url","https://"+e),t.value=e)}))})),e.addEventListener("submit",(function(i){i.preventDefault(),r.forEach((t=>{let e=t.getAttribute("data-full-url");e&&(t.value=e)}));for(let t of r)if(!t.checkValidity())return void t.reportValidity();!async function(){o.value=c;try{const r=await grecaptcha.execute("6Le_XUsqAAAAAKxtXMXAISRCGcFxUmoo5K22DRAG",{action:"submit"});let c={};new FormData(e).forEach(((t,e)=>{c[e]=t}));const i=await fetch("https://blockwall-recaptcha.netlify.app/.netlify/functions/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,formData:c})});o.value=n,i.ok?(a.style.display="block",l.style.display="none"):(a.style.display="none",l.style.display="block"),"true"===t.getAttribute("data-recaptcha-showconsole")&&console.log(await i.json())}catch(t){o.value=n,console.error("Error:",t),a.style.display="none",l.style.display="block"}}()}))}))}));
